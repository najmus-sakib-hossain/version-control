# DX-UI Tool Manifest
# Component injection for React/Vue/Svelte UI libraries

[tool]
name = "dx-ui"
version = "2.1.0"
description = "Zero-bloat UI component injector with on-demand loading"
author = "DX Tools Team"
repository = "https://github.com/dx-tools/dx-ui"

[dependencies]
# Tools that must run before this one
required = ["dx-style"]
optional = ["dx-icons", "dx-fonts"]

[triggers]
# File patterns that trigger this tool
patterns = [
    "**/*.tsx",
    "**/*.jsx",
    "**/*.vue",
    "**/*.svelte",
    "**/components/**",
]

# Code patterns detected via LSP
lsp_patterns = [
    "dxButton",
    "dxInput",
    "dxSelect",
    "dxModal",
    "dxCard",
    "dxTable",
]

[traffic]
# Traffic branch configuration
# green = auto-update (safe changes)
# yellow = merge required (potential conflicts)
# red = manual resolution (breaking changes)

# Changes that are always safe
green_patterns = [
    "*.css",
    "*.scss",
    "*.test.*",
    "*.spec.*",
]

# Changes that need review
yellow_patterns = [
    "*.tsx",
    "*.jsx",
    "**/components/**",
]

# Changes that are breaking
red_patterns = [
    "**/api/**",
    "**/types/**",
    "*.d.ts",
]

[execution]
priority = 80
timeout_seconds = 30
retry_attempts = 3
parallel_safe = false

# Pre-execution checks
pre_checks = [
    "validate_react_version",
    "check_style_bundle_exists",
]

# Post-execution actions
post_actions = [
    "generate_component_map",
    "update_import_cache",
]

[components]
# Component registry - maps pattern to injection strategy

[components.dxButton]
source = "r2://dx-ui/components/Button.tsx"
base_hash = "a7f3b9c8e2d4f1a6"
version = "2.1.0"
dependencies = ["dx-style/button.css"]
inject_mode = "import" # import | inline | cdn

[components.dxInput]
source = "r2://dx-ui/components/Input.tsx"
base_hash = "b8e4c9d3f5a2e7b1"
version = "2.1.0"
dependencies = ["dx-style/input.css"]
inject_mode = "import"

[components.dxModal]
source = "r2://dx-ui/components/Modal.tsx"
base_hash = "c9f5d4e6a3b8f2c7"
version = "2.0.5"
dependencies = ["dx-style/modal.css", "dx-icons"]
inject_mode = "import"

[storage]
# Storage configuration for component cache
cache_dir = ".dx/cache/dx-ui"
r2_bucket = "dx-components"
r2_prefix = "ui/v2"
compression = "zstd"
ttl_hours = 168 # 1 week

[lsp]
# LSP server configuration
enabled = true
semantic_tokens = true
completion_triggers = ["dx", "Dx"]
hover_docs = true
code_actions = ["import_component", "optimize_bundle"]
