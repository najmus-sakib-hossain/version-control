# DX-Style Tool Manifest
# CSS/SCSS processor with zero-bloat injection

[tool]
name = "dx-style"
version = "1.0.0"
description = "Smart CSS injector - only includes styles you actually use"
author = "DX Tools Team"
repository = "https://github.com/dx-tools/dx-style"

[dependencies]
required = []
optional = ["dx-fonts"]

[triggers]
patterns = [
    "**/*.css",
    "**/*.scss",
    "**/*.sass",
    "**/*.less",
    "**/styles/**",
]

lsp_patterns = [
    "className=",
    "class=",
    "styled.",
    "css`",
]

[traffic]
green_patterns = [
    "*.css",
    "*.scss",
    "**/variables/**",
]

yellow_patterns = [
    "**/components/**/*.css",
    "**/themes/**",
]

red_patterns = [
    "**/reset.css",
    "**/normalize.css",
    "**/global.css",
]

[execution]
priority = 100
timeout_seconds = 20
retry_attempts = 2
parallel_safe = true

pre_checks = []
post_actions = [
    "generate_bundle",
    "purge_unused",
    "minify_output",
]

[styles]
# Style registry

[styles.button]
source = "r2://dx-style/components/button.css"
base_hash = "d1a2b3c4e5f6g7h8"
selectors = [".dx-button", ".dx-btn"]
variables = ["--dx-primary", "--dx-radius"]

[styles.input]
source = "r2://dx-style/components/input.css"
base_hash = "e2b3c4d5f6g7h8i9"
selectors = [".dx-input", ".dx-field"]
variables = ["--dx-border", "--dx-focus"]

[processing]
# CSS processing options
autoprefixer = true
minify = true
source_maps = false
purge_unused = true
tree_shake = true

[storage]
cache_dir = ".dx/cache/dx-style"
r2_bucket = "dx-components"
r2_prefix = "style/v1"
compression = "brotli"
ttl_hours = 168

[lsp]
enabled = true
semantic_tokens = true
completion_triggers = ["dx-", "className"]
hover_docs = true
code_actions = ["extract_style", "optimize_selector"]
